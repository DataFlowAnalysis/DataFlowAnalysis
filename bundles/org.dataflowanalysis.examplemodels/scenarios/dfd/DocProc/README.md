# üìä Diagram: DocProc

## üîó Link to Original Paper/Article
[View Full Main Source](<https://zenodo.org/records/15059455>)

## üìù Short Description
This diagram shows the flow of data from the DocProc system. As described in the main source this diagram consists of three main parts: (i) the customer facing part (left-hand side), which provides dashboards and self-service facilities to customer administrators for uploading templates, managing accounts, and uploading batches of raw data, (ii) the document generation facilities (depicted in the middle) that involve scheduling document generation jobs, and generating PDF documents, and (iii) the document delivery subsystem, which is responsible for orchestrating the delivery of documents (right-hand side)

## üî§ Abbreviations
__None__

## üìñ Extensive Description (if possible)
For a more detailed description of the overall and inner workings of the system read the main source. Differences between this DFD and the one from the main source can be due to missing labels in the main source dfd, which we inferred as basic requests and confirmation data exchanges. In this section we explain the DFD of this application, which as mentioned earlier consists of three different parts.

In the first part, about the consumer facing part, the diagram starts with the __Customer Admin__ node which sends the *document_templates*, *raw_data* and *admin_credentials* (needed to log into the system) to the __Customer Organization Dashboard__, which returns the *status* after receiving them. In the upper part of the diagram there is the __DocProc Admin__ which sends the necessary infomation for the *organization_enrollment* (customer enrollment) to the __Admin Dashboard__, which receives this in addition to the DocProc *admin_credentials* from __Admin Credentials__. The __Admin Dashboard__ also send certain *permissions* to the customer organization to the __Customer organization Dashboard__. This last node then stores the *document_templates* from the __Template Storage__.

Regarding the second part about the document generation, first the __Customer Organization Dashboard__ sends the *raw_data* to the __Input Verification__ node, which verifies the correctness of the raw data. This node then send the *raw_data* to the __Raw Data Storage__ and a *batch_validation* (confirmation that the raw data batch received from the customer is valid) to the __Generation Scheduler__. This last node in turn sends a *validation_feedback* to te __Input Verification__ node. The __Generation Scheduler__ also receives the *next_generated_job* (raw data batch job) from the __Document Generation__ node to schedule a generation of documents. The __Document generation__ node also sends the *generated_pdf* to the __Generated PDFs Archive Storage__.

In this last part about the delivery of the documents first the *generated_pdfs* are retrieved from the __Generated PDFs Archive Storage__ by the __Delivery Scheduler__. Here the *generated_pdfs* can follow 2 different paths. The first one is to the __Personal Document Store__ where the *generated_pdfs* can then be retrieved by the __Recipient__. For retrieving these pdfs this node sends an *auth_request* and a *registe_request* in return. The second path is sending the *generated_pdfs* to the __Delivery Manager__ which then forwards them to the  __Print Service__, __Email__ and __Zoomit__ nodes. Thee last two nodes can then send a request for the *delivery_status* of the documents to the __Delivery Manager__.
 
## üè∑Ô∏è Label description

- ### üóÇÔ∏è Data Labels:
    - ### Data:
        - __OrganizationEnrollemnt__: Information for enrolling an organization/customer
        - __AdminCredentials__: Credentials needed for the administrator (docProc or customer) to use the system
        - __CustomerRawData__: Raw data from the customer to be put into the documents
        - __DocumentTemplates__: Templates where the raw data is going to be filled in by DocProc
        - __NextGenerationJob__: Information to the Generation Scheduler for the next batch of documents that need to be generated
        - __GeneratedPDFs__: Documents to be generated by DocProc
        - __ScheduleDelivery__: Schedule for the delivery of documents to the customer
        - __Permissions__: Permission given by the admin dashboard to the customer dashboard
        - __BatchValidation__: Confirmation that the batch of raw data is valid
        - __ValidationFeedback__: Feedback/confirmation from the validation of the batch
    
    - ### Reports:
        - __Error__: Error report from the Customer Organization Dashboard to the customer (e.g. failed raw data loading)
        - __Staus__: Status from the uploading of the data by the customer to its dashboard

    - ### Requests:
        - __Enrollment__: Request for enrollment of an organization
        - __DeliveryStatus__: Request for knowing the delivery status of the documents
        - __Register__: Request for registering into the Personal Document Store
        - __Authenticate__: Request for authentication into the Personal Document Store

- ### üè∑Ô∏è Node Labels:
    - ### Module:
        - __DeliveryManager__: This node belongs to the Delivery Manager module/component

    - ### SecurityLevel:
        - __Secure__: This node is secure
        
## ‚ö†Ô∏è Constraints
- The generated pdfs (possibly containing sensitive information) should never flow to a node which is not secure

    1. __secure__: `data Data.GeneratedPDFs neverFlows vertex !SecurityLevel.Secure`

## üö® Violations
- __None__










